<div class="dropdown">
    <button class="btn btn-link text-muted p-0" type="button" id="dropdownMenuButton{{ comment_id }}" data-bs-toggle="dropdown" aria-expanded="false">
        <i class="fas fa-ellipsis-v"></i>
    </button>
    <ul class="dropdown-menu dropdown-menu-end" id="dropdownMenuButton{{ comment_id }}">
        <!-- OpciÃ³n Eliminar -->
        <li>
            <form action="{{ url_for('review_bp.remove_review', review_id=comment_id) }}" method="POST" class="m-0 p-0">
                <button type="submit" class="dropdown-item text-danger">Eliminar</button>
            </form>
        </li>
        <!-- Placeholder para Editar -->
        <li>
            <a class="dropdown-item text-muted" href="#">Editar</a>
        </li>
        <!-- Responder -->
        <li>
            <button type="button" class="dropdown-item text-muted" onclick="showReplyPrompt('{{ comment_id }}', '{{ tutor_id }}')">Responder</button>
        </li>
    </ul>
</div>

<script>
function showReplyPrompt(reviewId, tutorId) {
    const replyText = prompt("Escribe tu respuesta:");
    if (replyText && replyText.trim() !== '') {
        fetch(`/reply-review/${reviewId}`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: `tutor_id=${encodeURIComponent(tutorId)}&comment=${encodeURIComponent(replyText)}`
        })
        .then(response => {
            if (response.redirected) {
                window.location.href = response.url;
            }
        });
    }
}
</script>